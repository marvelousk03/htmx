{% extends 'base.html' %}

{% block content %}
<h2>Your Books</h2>
<a hx-get="{% url 'book_create' %}" hx-target="#edit-form" hx-swap="innerHTML" class="btn btn-add">➕ Add a New Book</a>

<!-- Success Messages -->
<div id="messages">
    {% for message in messages %}
    <div class="alert">{{ message }}</div>
    {% endfor %}
</div>

<div id="book-list">
    {% for book in books %}
    <div id="book-{{ book.id }}" class="book-card">
        <h3>{{ book.title }}</h3>
        <p><strong>By:</strong> {{ book.author }}</p>
        <div class="actions">
            <button hx-get="{% url 'book_edit' book.id %}" hx-target="#edit-form" hx-swap="innerHTML"
                class="btn btn-edit">✏️ Edit</button>
            <button hx-post="{% url 'book_delete' book.id %}" hx-target="#book-{{ book.id }}" hx-swap="outerHTML"
                class="btn btn-delete">🗑️ Delete</button>
        </div>
    </div>
    {% empty %}
    <p>No books added yet.</p>
    {% endfor %}
</div>

<div id="edit-form"></div>

{% endblock %}